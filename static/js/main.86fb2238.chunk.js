(this["webpackJsonpdata-table"]=this["webpackJsonpdata-table"]||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(3),r=n.n(c),i=n(4),s=n(1),l=n(5),u=n(6),d=n(8),h=n(7),f=n(9),p=function(e){var t=e.columns,n=e.isSelectAll,a=e.isSticky,c=e.onSelectionChange,r=a?"div":"tr",i=a?"div":"th";return o.a.createElement(r,{className:"table-head ".concat(a?"table-head-sticky":"")},o.a.createElement(i,{className:"table-head-column"},o.a.createElement("input",{type:"checkbox",className:"checkbox",checked:!!n,onChange:function(e){c&&c(e.target.checked)}})),t.map((function(e){var t={};return e.width?t.width=e.width:t.flex="1",o.a.createElement(i,{key:e.id,className:"table-head-column ".concat(e.numeric?"table-head-column_is-numeric":""),style:t},e.label)})))},m=n(10);var w=function(e){var t=e.config,n=e.onClick,a=e.onSelectionChange,c=e.row,r=c.id,i=c.selected,s=Object(m.a)(c,["id","selected"]);return o.a.createElement("tr",{className:"table-row","data-row-id":r,onClick:function(e){return n&&n()},style:{height:"".concat(t.rowHeight,"px"),top:"".concat(t.rowStartIndex,"px")}},o.a.createElement("td",{className:"table-row-item"},o.a.createElement("input",{type:"checkbox",className:"checkbox",checked:!!i,onClick:function(e){e.stopPropagation()},onChange:function(e){a&&a(e.target.checked)}})),t.keys.map((function(e,n){var a={};return t.width[n]?a.width=t.width[n]:a.flex="1",o.a.createElement("td",{key:"TableRow_".concat(e,"_").concat(r),style:a,className:"table-row-item ".concat(t.numeric[n]?"table-row-item_is-numeric":"")},s[e])})))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={computedRows:e.rows.slice(0,2*e.visibleRows),isLoading:!1,rows:e.rows,rowStartIndex:0,page:0,visibleRows:e.visibleRows},n.tableRef=o.a.createRef(),n.tableBodyRef=o.a.createRef(),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.onLoadMore){var t=this.tableRef.current,n=this.tableBodyRef.current;t.addEventListener("scroll",(function(a){var o=t.scrollTop,c=t.clientHeight,r=n.scrollHeight;e._throttle(e._handleRowVisibility.bind(e),10)(o),e.state.isLoading||r-c<=o&&e.setState({isLoading:!0},(function(){e._loadMore()}))}))}}},{key:"_throttle",value:function(e,t){var n=!1;return function(){n||(e.apply(null,arguments),n=!0,setTimeout((function(){n=!1}),t))}}},{key:"_handleRowVisibility",value:function(e){var t=this.props.rowHeight,n=this.state,a=n.rows,o=n.visibleRows,c=Math.floor(e/t),r=c-2*o,i=c+4*o,s=r>0?r:0,l=[];a.slice(s,c).forEach((function(e){return l.push(e)})),a.slice(c,i).forEach((function(e){return l.push(e)})),this.setState({computedRows:l,rowStartIndex:s})}},{key:"_loadMore",value:function(){var e=this,t=this.props.onLoadMore,n=this.state.page+1;t(n).then((function(t){e.setState((function(e){return{isLoading:!1,page:n,rows:[].concat(Object(s.a)(e.rows),Object(s.a)(t))}}))}))}},{key:"_recomputeRows",value:function(){var e=this.state,t=e.rows,n=e.computedRows.map((function(e){return t.find((function(t){return t.id===e.id}))}));this.setState({computedRows:n})}},{key:"_rowSelectionChangeHandler",value:function(e,t){var n=this,a=this.props.onSelectionChange;this.setState((function(n){var o=Object(s.a)(n.rows);return o[e].selected=t,a&&a(o.filter((function(e){return!!e.selected})).map((function(e){return e.id}))),{rows:o}}),(function(){n._recomputeRows()}))}},{key:"_selectAllHandler",value:function(e){var t=this,n=this.props.onSelectionChange;this.setState((function(t){var a=Object(s.a)(t.rows).map((function(t){return g({},t,{selected:e})}));return n&&n((e?t.rows:[]).map((function(e){return e.id}))),{rows:a}}),(function(){t._recomputeRows()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.columns,c=t.config,r=t.onRowClick,i=t.rowHeight,s=t.visibleRows,l=this.state,u=l.computedRows,d=l.isLoading,h=l.rows,f=l.rowStartIndex,m=!!c.stickyHeader,b=h.filter((function(e){return!!e.selected})).length===h.length,v={keys:[],numeric:[],rowHeight:i,width:[]};a.forEach((function(e){v.keys.push(e.id),v.numeric.push(e.numeric),v.width.push(e.width)}));var y={columns:a,isSelectAll:b,onSelectionChange:this._selectAllHandler.bind(this)};return o.a.createElement("div",{className:"data-table ".concat(n||""),"data-is-loading":d},d&&o.a.createElement("div",{className:"loader"}),m&&o.a.createElement(p,Object.assign({},y,{isSticky:!0})),o.a.createElement("table",{ref:this.tableRef,cellPadding:"0",cellSpacing:"0",style:{height:"".concat(s*i,"px")}},!m&&o.a.createElement("thead",null,o.a.createElement(p,Object.assign({},y,{isSticky:!1}))),o.a.createElement("tbody",{ref:this.tableBodyRef,className:"data-table-body",style:{height:"".concat(h.length*i,"px")}},u.map((function(t,n){return o.a.createElement(w,{key:"DataTable_TableRow_".concat(t.id),config:g({},v,{rowStartIndex:(f+n)*i}),row:t,onClick:function(e){return r(t,f+n)},onSelectionChange:function(t){return e._rowSelectionChangeHandler(f+n,t)}})})))))}}]),t}(o.a.Component),y=(n(16),n(17),function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],n=50*e;n<50*e+50;n++)t.push({id:"id_".concat(n),description:"Loreum Ipsum",product:o.a.createElement("span",null,"Product ".concat(n+1)),price:15.2+n});return t}),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout((function(){return t(y(e))}),2500)}))};r.a.render(o.a.createElement((function(){return o.a.createElement("div",null,o.a.createElement("h1",{className:"header"},"Data Table"),o.a.createElement(v,{onLoadMore:k,onRowClick:console.log,onSelectionChange:console.log,config:{stickyHeader:!0},columns:[{id:"product",label:"Product",numeric:!1,width:"160px"},{id:"description",label:"Description",numeric:!1,width:"50%"},{id:"price",label:"Price",numeric:!0}],rows:y(0),rowHeight:55,visibleRows:10}))}),null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.86fb2238.chunk.js.map